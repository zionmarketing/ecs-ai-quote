{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-action-reducer.ts"],"names":["callServer","ACTION","NEXT_ROUTER_STATE_TREE","NEXT_URL","RSC_CONTENT_TYPE_HEADER","createFromFetch","encodeReply","process","env","NEXT_RUNTIME","require","addBasePath","createHrefFromUrl","handleExternalUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","handleMutable","fillLazyItemsTillLeafWithHead","createEmptyCacheNode","hasInterceptionRouteInCurrentTree","handleSegmentMismatch","refreshInactiveParallelSegments","prepareFlightRouterStateForRequest","fetchServerAction","state","nextUrl","actionId","actionArgs","body","res","fetch","method","headers","Accept","tree","NEXT_DEPLOYMENT_ID","location","get","revalidatedParts","revalidatedHeader","JSON","parse","paths","tag","cookie","e","redirectLocation","URL","canonicalUrl","window","href","undefined","isFlightResponse","response","Promise","resolve","actionFlightData","actionResult","serverActionReducer","action","reject","mutable","currentTree","preserveCustomHistoryState","inFlightServerAction","then","flightData","pushRef","pendingPush","newHref","flightDataPath","length","console","log","treePatch","newTree","cacheNodeSeedData","head","slice","rsc","cache","prefetchRsc","updatedTree","updatedCache","includeNextUrl","Boolean","prefetchCache","Map","patchedTree"],"mappings":"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"}
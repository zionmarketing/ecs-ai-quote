{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-action-reducer.ts"],"names":["serverActionReducer","createFromFetch","encodeReply","process","env","NEXT_RUNTIME","require","fetchServerAction","state","nextUrl","actionId","actionArgs","body","res","fetch","method","headers","Accept","RSC_CONTENT_TYPE_HEADER","ACTION","NEXT_ROUTER_STATE_TREE","prepareFlightRouterStateForRequest","tree","NEXT_DEPLOYMENT_ID","NEXT_URL","location","get","revalidatedParts","revalidatedHeader","JSON","parse","paths","tag","cookie","e","redirectLocation","URL","addBasePath","canonicalUrl","window","href","undefined","isFlightResponse","response","Promise","resolve","callServer","actionFlightData","actionResult","action","reject","mutable","currentTree","preserveCustomHistoryState","hasInterceptionRouteInCurrentTree","inFlightServerAction","then","flightData","pushRef","pendingPush","handleExternalUrl","newHref","createHrefFromUrl","flightDataPath","length","console","log","treePatch","newTree","applyRouterStatePatchToTree","handleSegmentMismatch","isNavigatingToNewRootLayout","cacheNodeSeedData","head","slice","rsc","cache","createEmptyCacheNode","prefetchRsc","fillLazyItemsTillLeafWithHead","refreshInactiveParallelSegments","updatedTree","updatedCache","includeNextUrl","Boolean","prefetchCache","Map","patchedTree","handleMutable"],"mappings":"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"}